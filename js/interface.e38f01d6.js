(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["interface"],{f20a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"mb10"},[a("Row",[a("Col",{attrs:{span:5}},[a("TeamProjectCascader",{on:{selectedTeamProject:t.selectedTeamProject}})],1),a("Col",{attrs:{span:2,offset:18}})],1)],1),a("Table",{staticClass:"mb10",attrs:{border:"",columns:t.columns,data:t.data1},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleRun(i)}}},[t._v("运行")]),a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"warning",size:"small"}},[t._v("编辑")]),a("Button",{attrs:{type:"error",size:"small"}},[t._v("删除")])]}}])}),a("div",{staticClass:"pager mb10"},[a("Page",{attrs:{total:40,size:"small","show-total":"","show-elevator":""}})],1)],1)},n=[],s=(a("c975"),a("fb6a"),a("d3b7"),a("ac1f"),a("5319"),a("841c"),a("1276"),a("5530")),r={name:"home",components:{TeamProjectCascader:function(){return a.e("chunk-2d21dc05").then(a.bind(null,"d344"))}},data:function(){return{data:[],search:{team:"",project:"",limit:10,offset:0},total:0,cases:[],column:{},columns:[{title:"ID",key:"id",width:80,align:"center"},{title:"团队",key:"team",width:180,align:"center"},{title:"项目",key:"project",width:180,align:"center"},{title:"用例",key:"name",width:180,align:"center"},{title:"方法",key:"method",width:80,align:"center"},{title:"域名",key:"host",width:180,align:"center"},{title:"路径",key:"path",width:180,align:"center"},{title:"创建时间",key:"created",width:180,tooltip:!0,align:"center"},{title:"更新时间",width:180,tooltip:!0,key:"updated",align:"center"},{title:"操作",slot:"action",align:"center",width:300,fixed:"right"}],data1:[],report:"",variables:"",loading:!0,dialogFormVisible:!1}},mounted:function(){this.refresh(),document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()},this.rowDrop()},methods:{rowDrop:function(){},handleSelectionChange:function(){},handleCurrentChange:function(t){this.page=t-1,this.refresh()},refresh:function(){var t=this;this.loading=!0,this.$axios.post("/api/v1/interface/search",this.search).then((function(e){0===e.data.status?(t.total=e.data.total,t.data1=e.data.data):t.$message({type:"error",message:e.data.message,center:!0}),t.loading=!1})).catch((function(){t.$message({type:"error",message:"服务出错，请联系管理员",center:!0}),t.loading=!1}))},handleRun:function(t){this.dialogFormVisible=!0,this.column=t},runCase:function(){var t=this,e=Object(s["a"])({report:this.report},this.column);if(this.variables){e.variables=[];var a=this.variables.replace(/\n/g,";"),i=a.split(";");for(var n in i){var r=i[n].indexOf(":");e.variables.push({name:i[n].slice(0,r),value:i[n].slice(r+1,i[n].length)})}}this.$axios({url:"/api/v1/interface/trigger",method:"post",data:JSON.stringify(e),headers:{"Content-Type":"application/json;"}}).then((function(e){0===e.data.status?t.$message({type:"success",message:"运行用例成功!",center:!0}):t.$message({type:"warning",message:e.data.message,center:!0}),t.dialogFormVisible=!1})).catch((function(){t.$message({type:"error",message:"运行接口用例时发生错误!",center:!0})}))},handleEdit:function(t,e){this.$router.push({path:"/interface/edit",query:{id:e.id}})},selectedTeamProject:function(t){this.search.team=t.team,this.search.project=t.project,this.refresh()}}},o=r,c=a("2877"),l=Object(c["a"])(o,i,n,!1,null,null,null);e["default"]=l.exports}}]);